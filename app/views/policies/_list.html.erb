<table class="table table-bordered table-striped table-fixed">
  <tr>
    <th><%= _('Name') %></th>
    <th><%= _('Content') %></th>
    <th><%= _('Profile') %></th>
    <th><%= _('Tailoring File') %></th>
    <th><%= _('Effective Profile') %></th>
    <th></th>
  </tr>
  <% for policy in @policies %>
    <tr>
      <td class="ellipsis">
        <%= link_to_if_authorized(policy.name.to_s, hash_for_policy_dashboard_policy_path(:id => policy.id)) %>
      </td>
      <td>
        <% if !policy.scap_content.nil? %>
          <%= link_to_if_authorized policy.scap_content.title,
                                         hash_for_edit_scap_content_path(:id => policy.scap_content) %>
        <% end %>
      </td>
      <td>
        <%= policy_profile_from_scap_content policy %>
      </td>
      <td>
        <% if policy.tailoring_file %>
          <%=  link_to_if_authorized policy.tailoring_file.name, hash_for_edit_tailoring_file_path(:id => policy.tailoring_file_id) %>
        <% else %>
          <%= _('None') %>
        <% end%>
      </td>
      <td>
        <%= effective_policy_profile policy %>
      </td>
      <td>
        <%= action_buttons(
                display_link_if_authorized(_("Show Guide"), hash_for_policy_path(:id => policy.id)),
                display_link_if_authorized(_("Edit"), hash_for_edit_policy_path(:id => policy.id)),
                display_delete_if_authorized(hash_for_policy_path(:id => policy.id),
                                             :confirm => _("Delete compliance policy %s with all the reports?") % policy.name)
            ) %>
      </td>
    </tr>
  <% end %>
</table>

<%= webpacked_plugins_js_for :foreman_openscap %>

<span id="policy-count"></span>
<%# binding.pry %>
<%= mount_react_component('Policies', '#policy-count', { :url => api_compliance_policies_path }.to_json) %>
